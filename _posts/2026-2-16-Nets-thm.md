---
title: "Networking Essentials" 
date: 2026-2-16 17:30:00 0000+
tags: [WriteUp,DHCP,SMTP]
categories: [Notes, THM ]

---

## DHCP

Dynamic Host Configuration Protocol

### ğŸ¤ DHCP = Network Butler

Think of **DHCP** as a helpful butler at the door:

1. **Discover** â€“ â€œHey, any DHCP server out there?â€
2. **Offer** â€“ Server replies: â€œIâ€™ve got an IP for you!â€
3. **Request** â€“ Client says: â€œYes please, Iâ€™ll take it.â€
4. **Acknowledge** â€“ Server confirms: â€œDone! Youâ€™re all set.â€

This is the DORA processâ€”like a polite handshake between client and server.

Your device is like a guest arriving at a hotel. Here's how DORA plays out:

| ğŸ§© Step | ğŸ’¬ What Happens | ğŸ¨ Hotel Analogy |
| --- | --- | --- |
| **Discover** | Device shouts, â€œAny DHCP here?â€ | Guest walks in saying, â€œDo you have any rooms?â€ |
| **Offer** | DHCP replies, â€œHereâ€™s an IP!â€ | Receptionist says, â€œWeâ€™ve got Room 133 available!â€ |
| **Request** | Device says, â€œIâ€™ll take it!â€ | Guest confirms, â€œYes, Iâ€™d like Room 133.â€ |
| **Acknowledge** | DHCP confirms, â€œRoomâ€™s yours!â€ | Receptionist gives key and says, â€œWelcome!â€ |

ğŸ’¡ **Why It Matters**:

- This process ensures no two guests (devices) get the same room (IP address).
- It automates network setup, perfect for mobile and roaming devices.
- Uses **UDP ports 67 (server)** and **68 (client)** to keep things fast and lightweight.

## ARP: Bridging Layer 3 Addressing to Layer 2 Addressing

### Ethernet Frames & Layer 2: The Basics

When your device sends an IP packet, it needs more than just the destination IPâ€”it wraps that packet inside an **Ethernet frame**. Thatâ€™s Layer 2 magic, which helps your packet travel physically across the local network.

Each Ethernet frame includes:

- **Destination MAC Address** â€“ Where the frame is going.
- **Source MAC Address** â€“ Who sent the frame.
- **Type Field** â€“ Says whatâ€™s inside (like IPv4).

### Why MAC Addresses Matter on the Same Network

Your computer may know it wants to reach `192.168.66.1`, but routers and switches deal in MAC addressesâ€”not IPs. To build the correct Ethernet frame, the sending device must first **find the MAC address** linked to that IP. Thatâ€™s where **ARP** comes in.

### ARP â€“ The MAC Address Detective

- Your device says: â€œHey, who has IP `192.168.66.1`?â€
- It sends an **ARP Request** using the **broadcast address** `ff:ff:ff:ff:ff:ff`, so all devices hear it.
- The correct device replies: â€œI do! And my MAC is `44:df:65:d8:fe:6c`.â€
- Now, your device stores that MAC and uses it to frame future packets.

ğŸ› ï¸ **Packet Tools You Saw**:

- `tshark` and `tcpdump` display ARP traffic and make network behavior visible for analysis and troubleshooting.
- Unlike most protocols, **ARP isnâ€™t encapsulated in IP or UDP**â€”it's tucked directly into the Ethernet frame.

![image.png](/assets/Imgs/Networking_essentials/image.png)

## ICMP: Troubleshooting Networks

ICMP isnâ€™t about sending your emails or files. Instead, it's like a system mechanicâ€”it helps you check if things are working and where theyâ€™re breaking.

### ğŸ“ **ping** = â€œHey, you there?â€

- Sends an **ICMP Echo Request** (Type 8).
- If the target responds with **ICMP Echo Reply** (Type 0), you know it's alive.
- It also tells you **how long it took**â€”thatâ€™s **RTT** (round-trip time).
- Example:
If you ping a router and get a reply in 4ms, the connectionâ€™s healthy and quick.

ğŸ“‰ If there's **no reply**:

- The system might be offline.
- A firewall could be blocking ICMP.
- Network issues could be causing packet drops.

### ğŸ—ºï¸ **traceroute/tracert** = â€œWho did you pass on the way?â€

- Sends ICMP packets with increasing **TTL** (Time to Live).
- Each router decrements TTL. When TTL hits 0, router sends **ICMP Time Exceeded** (Type 11).
- This lets you **track the path** your packet took through the network.

ğŸ§­ What you see:

- Each router that replies reveals its presence.
- Some routers donâ€™t respond (youâ€™ll see `* *`).
- Final destination = the target system.

### ğŸ’¡ Recap Cheat Sheet

| Concept | What it Does | ICMP Type | Real-Life Analogy |
| --- | --- | --- | --- |
| **ping** | Tests connectivity & RTT | 8 (Request), 0 (Reply) | Like saying â€œhelloâ€ and waiting for a wave back |
| **traceroute** | Maps the path to a system | 11 (Time Exceeded) | Like tracking your parcel through each checkpoint |

## Routing

### How Does a Packet Know Where to Go?

Imagine the Internet as a sprawling city with billions of homes (devices) and roads (networks). A packet is like a delivery truck. To reach the correct address, it must:

1. Know the destination IP.
2. Ask each router along the way which road to take next.
3. Rely on **routing protocols** to make smart, dynamic decisions.

### ğŸ§­ Routing Protocols = Routerâ€™s GPS

| Protocol | What It Does | Best Used For |
| --- | --- | --- |
| **OSPF** | Picks the shortest path using link cost | Large enterprise networks |
| **EIGRP (Enhanced Interior Gateway Routing Protocol)** | Balances speed and reliability (Ciscoâ€™s hybrid method) | Cisco-based infrastructures |
| **BGP** | Controls Internet-wide routing across ISPs | Global Internet backbone |
| **RIP** | Chooses routes with the fewest hops | Simple or legacy networks |

ğŸ’¡ **Real-Life Analogy:**

- **OSPF(open shortest path first)**: Like Google Mapsâ€”it recalculates the fastest path based on traffic.
- **BGP(border gateway protocol )**: More like FedEx coordinationâ€”deals with which delivery company (network) to hand off the parcel to.
- **RIP(routing information protocol)**: Think of it as basic paper mapsâ€”easy, but doesnâ€™t consider real-time info.

## NAT

network address translation 

### NAT in Simple Terms

Imagine you live in an apartment building with 20 people sharing a single intercom line. Even though you all have individual apartments (private addresses), visitors call one public intercom number, and the receptionist (your router) knows exactly which apartment to connect it to.

Thatâ€™s exactly what **NAT** does.

### ğŸ” How NAT Works â€“ Step-by-Step

1. ğŸ§‘â€ğŸ’» **Private device initiates a connection**
E.g., your laptop 192.168.0.129 sends a request on TCP port 15401.
2. ğŸ§­ **Router replaces internal IP/port with public ones**
E.g., converts to 212.3.4.5:19273 and forwards it to the Internet.
3. ğŸ““ **Router tracks the mapping**
It keeps a table:
`192.168.0.129:15401 â†’ 212.3.4.5:19273`
4. ğŸŒ **Web server responds to public IP**
Response goes to 212.3.4.5:19273.
5. ğŸšª **Router reverses translation**
Routes it back to 192.168.0.129:15401.

### ğŸ¯ Why NAT Is a Game Changer

- âœ… Saves IPv4 addresses
- âœ… Allows multiple devices to share one public IP
- âœ… Adds a layer of **security** by hiding internal IPs

ğŸ’¡ Think of it as a translator that speaks two languagesâ€”private inside your network, public on the Internet.